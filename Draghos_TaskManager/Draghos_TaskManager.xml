<Ui xmlns="http://www.blizzard.com/wow/ui/" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">

	<Script file="Draghos_TaskManager.lua"/>

	<Button name="StepButtonTemplate" virtual="true">
		<Size x="286" y="22"/>
		<Anchors>
			<Anchor point="LEFT">
				<Offset x="2" y="0"/>
			</Anchor>
		</Anchors>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentBgTop" inherits="Char-Stat-Top" parentKey="BgTop">
					<Size x="285" y="9"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="1"/>
					</Anchors>
				</Texture>
				<Texture name="$parentBgBottom" inherits="Char-Stat-Top" parentKey="BgBottom">
					<Size x="286" y="9"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="0" y="-4"/>
					</Anchors>
				</Texture>
				<Texture name="$parentBgMiddle" file="Interface\CharacterFrame\Char-Stat-Middle" parentKey="BgMiddle" vertTile="true">
					<Size x="286" y="8"/>
					<Anchors>
						<Anchor point="LEFT" x="1"/>
					</Anchors>
					<TexCoords left="0.00390625" right="0.66406250" top="0.00000000" bottom="1.00000000"/>
				</Texture>
			</Layer>
			<Layer level="BACKGROUND" textureSubLevel="1">
				<Texture name="$parentStripe" parentKey="Stripe">
					<Anchors>
						<Anchor point="TOPLEFT" x="1" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentSelectedBar" parentKey="SelectedBar" file="Interface\FriendsFrame\UI-FriendsFrame-HighlightBar" alpha="0.4" alphaMode="ADD" hidden="true"/>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton parentKey="Check" name="$parentCheck">
				<Size x="26" y="26"/>
				<Anchors>
					<Anchor point="LEFT" relativePoint="LEFT" x="5" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						TaskManagerFrameSteps_ToggleCompleted(self);
					</OnClick>
				</Scripts>
				<NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
				<PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
				<CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
				<DisabledCheckedTexture file="Interface\Buttons\UI-CheckBox-Check-Disabled"/>
				<HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
			</CheckButton>
			<Button parentKey="Remove" name="$parentRemove" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="RIGHT" relativePoint="RIGHT" x="-5" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						TaskManagerFrameSteps_RemoveStep(self);
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				SetClampedTextureRotation(self.BgBottom, 180);
			</OnLoad>
			<OnClick>
				TaskManagerFrameSteps_SelectStep(self);
			</OnClick>
		</Scripts>
		<ButtonText name="$parentTitleText" inherits="GameFontNormalSmallLeft" justifyH="LEFT" parentKey="text">
			<Anchors>
				<Anchor point="LEFT" relativeKey="$parent.Check" relativePoint="RIGHT" x="3" y="0"/>
				<Anchor point="RIGHT" relativeKey="$parent.Remove" relativePoint="RIGHT" x="-3" y="0"/>
			</Anchors>
		</ButtonText>
		<HighlightTexture file="Interface\FriendsFrame\UI-FriendsFrame-HighlightBar-Blue" alphaMode="ADD"/>
	</Button>

	<Button name="TaskManagerSummaryLineTemplate" mixin="TaskManagerSummaryLineMixin" inherits="ScrollListLineTextTemplate" virtual="true">
		<Layers>
			<Layer level="BORDER">
				<Texture parentKey="Icon">
					<Size x="14" y="14"/>
					<Anchors>
						<Anchor point="LEFT" x="8" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad method="OnLoad"/>
		</Scripts>
		<HighlightTexture parentKey="HighlightTexture" atlas="auctionhouse-ui-row-highlight" useAtlasSize="false" alphaMode="ADD">
			<Anchors>
				<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
				<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
			</Anchors>
		</HighlightTexture>
	</Button>

	<Frame name="TaskManagerGroupBoxTemplate" virtual="true">
		<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<EdgeSize>
				<AbsValue val="16"/>
			</EdgeSize>
			<TileSize>
				<AbsValue val="16"/>
			</TileSize>
			<BackgroundInsets>
				<AbsInset left="5" right="5" top="5" bottom="5"/>
			</BackgroundInsets>
		</Backdrop>
		<Layers>
			<Layer level="BACKGROUND">
				<FontString parentKey="Title" inherits="GameFontNormalSmall">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="6" y="2"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self:SetBackdropBorderColor(TOOLTIP_DEFAULT_COLOR.r, TOOLTIP_DEFAULT_COLOR.g, TOOLTIP_DEFAULT_COLOR.b, 0.5);
				self:SetBackdropColor(TOOLTIP_DEFAULT_BACKGROUND_COLOR.r, TOOLTIP_DEFAULT_BACKGROUND_COLOR.g, TOOLTIP_DEFAULT_BACKGROUND_COLOR.b);
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="TaskManagerFrame" enableMouse="true" toplevel="true" parent="UIParent" hidden="true" frameStrata="MEDIUM" inherits="ButtonFrameTemplate" mixin="TaskManagerMixin">
		<Size x="646" y="468"/>
		<Anchors>
			<Anchor point="TOPLEFT" x="100" y="-84"/>
		</Anchors>
		<Frames>
			<Frame name="$parentInsetRight" parentKey="InsetRight" inherits="InsetFrameTemplate" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.Inset" relativePoint="TOPRIGHT" x="1" y="0"/>
					<Anchor point="BOTTOMRIGHT" x="-4" y="4"/>
				</Anchors>
			</Frame>
			<Frame parentKey="SummaryList" inherits="ScrollListTemplate" mixin="TaskManagerFrameSummaryListMixin" useParentLevel="true">
				<Size x="168" y="0"/>
				<Anchors>
					<Anchor point="TOP" relativeKey="$parent" relativePoint="BOTTOM" x="0" y="2"/>
					<Anchor point="BOTTOM" relativeKey="$parent.TopTileStreaks" relativePoint="BOTTOM"/>
					<Anchor point="LEFT" x="-1"/>
				</Anchors>
				<Scripts>
					<OnLoad method="OnLoad"/>
				</Scripts>
			</Frame>
			<EditBox parentKey="TitleEditBox" letters="64" autoFocus="false" inherits="InputBoxTemplate" mixin="TaskManagerFormMixin">
				<Size x="170" y="20"/>
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.SummaryList" relativePoint="TOPRIGHT" x="20" y="-25"/>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString inherits="GameFontNormalSmall" text="TASKLOG_TASK_TITLE">
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="0" y="2"/>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnTextChanged method="UpdateFormStatus"/>
				</Scripts>
			</EditBox>
			<CheckButton parentKey="ActivateCheckButton" name="$parentActivateCheckButton" inherits="OptionsSmallCheckButtonTemplate" mixin="TaskManagerFormMixin">
				<Anchors>
					<Anchor point="LEFT" relativeKey="$parent.TitleEditBox" relativePoint="RIGHT" x="15" y="0"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[self:GetName().."Text"]:SetText(ACTIVATE);
					</OnLoad>
					<OnClick method="UpdateFormStatus"/>
				</Scripts>
			</CheckButton>
			<Frame parentKey="StepsGroupBox" name="$parentStepsGroupBox" inherits="TaskManagerGroupBoxTemplate">
				<Size x="300" y="150"/>
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.TitleEditBox" relativePoint="BOTTOMLEFT" x="-8" y="-25"/>
				</Anchors>
				<Frames>
					<ScrollFrame parentKey="StepsScrollFrame" name="$parentStepsScrollFrame" inherits="HybridScrollFrameTemplate" mixin="TaskManagerStepsScrollFrameMixin">
						<Size x="292" y="142"/>
						<Anchors>
							<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="4" y="-4"/>
						</Anchors>
						<Frames>
							<Slider name="$parentScrollBar" inherits="HybridScrollBarTemplate" parentKey="scrollBar">
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT">
										<Offset x="4" y="-13"/>
									</Anchor>
									<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT">
										<Offset x="4" y="14"/>
									</Anchor>
								</Anchors>
							</Slider>
						</Frames>
						<Scripts>
							<OnLoad method="OnLoad"/>
							<OnShow method="Update"/>
						</Scripts>
					</ScrollFrame>
				</Frames>
			</Frame>
			<Button parentKey="ModifyStepButton" inherits="UIPanelButtonTemplate" text="MODIFY" mixin="TaskManagerModifyStepButtonMixin">
				<Size x="80" y="22"/>
				<Anchors>
					<Anchor point="TOPRIGHT" relativeKey="$parent.StepsGroupBox" relativePoint="BOTTOMRIGHT" x="0" y="-5"/>
				</Anchors>
				<Scripts>
					<OnClick method="OnClick"/>
				</Scripts>
			</Button>
			<Button parentKey="AddStepButton" inherits="UIPanelButtonTemplate" text="ADD" mixin="TaskManagerAddStepButtonMixin">
				<Size x="80" y="22"/>
				<Anchors>
					<Anchor point="RIGHT" relativeKey="$parent.ModifyStepButton" relativePoint="LEFT" x="-10" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick method="OnClick"/>
				</Scripts>
			</Button>
			<Frame parentKey="RepeatDropDown" inherits="UIDropDownMenuTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.StepsGroupBox" relativePoint="BOTTOMLEFT" x="-18" y="-45"/>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentLabel" inherits="GameFontNormalSmall" text="TASK_REPEAT">
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="22" y="3"/>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
			<Button parentKey="SaveButton" inherits="UIPanelButtonTemplate" text="SAVE" mixin="TaskManagerSaveButtonMixin">
				<Size x="78" y="22"/>
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.RepeatDropDown" relativePoint="BOTTOMLEFT" x="18" y="-15"/>
				</Anchors>
				<Scripts>
					<OnLoad method="OnLoad"/>
					<OnClick method="OnClick"/>
				</Scripts>
			</Button>
			<Button parentKey="RemoveButton" inherits="UIPanelButtonTemplate" text="REMOVE" mixin="TaskManagerRemoveButtonMixin">
				<Size x="78" y="22"/>
				<Anchors>
					<Anchor point="LEFT" relativeKey="$parent.SaveButton" relativePoint="RIGHT" x="20" y="0"/>
				</Anchors>
				<Scripts>
					<OnLoad method="OnLoad"/>
					<OnClick method="OnClick"/>
				</Scripts>
			</Button>
			<Frame parentKey="StepModalDialog" name="$parentStepModalDialog" toplevel="true" enableMouse="true" enableKeyboard="true" frameStrata="DIALOG" hidden="true" mixin="TaskManagerStepModalDialogMixin">
				<Size x="290" y="286"/>
				<Anchors>
					<Anchor point="CENTER"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture name="$parentButtonBackground" file="Interface\Buttons\UI-Button-Borders">
							<Size x="256" y="26"/>
							<Anchors>
								<Anchor point="BOTTOMLEFT" x="11" y="9"/>
								<Anchor point="BOTTOMRIGHT" x="-11" y="9"/>
							</Anchors>
							<TexCoords left="0.0" right="1.0" top="0.59375" bottom="1.0"/>
						</Texture>
					</Layer>
				</Layers>
				<Frames>
					<Frame parentKey="Border" inherits="DialogBorderDarkTemplate"/>
					<Frame parentKey="Header" inherits="DialogHeaderTemplate">
						<KeyValues>
							<KeyValue key="textString" value="TASK_MANAGER_STEP_DIALOG_TITLE" type="global"/>
						</KeyValues>
					</Frame>
					<Frame parentKey="StepTypeDropDown" name="$parentStepTypeDropDown" inherits="UIDropDownMenuTemplate">
						<Anchors>
							<Anchor point="TOPLEFT" x="15" y="-45"/>
						</Anchors>
						<Layers>
							<Layer level="BACKGROUND">
								<FontString name="$parentLabel" inherits="GameFontNormalSmall" text="STEP_COMPLETION_TYPE">
									<Anchors>
										<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="22" y="3"/>
									</Anchors>
								</FontString>
							</Layer>
						</Layers>
						<Scripts>
							<OnShow>
								_G[self:GetName().."Text"]:SetText("");
							</OnShow>
						</Scripts>
					</Frame>
					<Frame parentKey="ManualStep" hidden="true">
						<Size x="200" y="240"/>
						<Anchors>
							<Anchor point="TOPLEFT" relativeKey="$parent.StepTypeDropDown" relativePoint="BOTTOMLEFT" x="22" y="-20"/>
						</Anchors>
						<Frames>
							<EditBox parentKey="StepEditBox" letters="64" autoFocus="true" inherits="InputBoxTemplate" mixin="TaskManagerStepModalDialogMixin">
								<Size x="220" y="20"/>
								<Anchors>
									<Anchor point="TOPLEFT" x="0" y="0"/>
								</Anchors>
								<Layers>
									<Layer level="BACKGROUND">
										<FontString inherits="GameFontNormalSmall" text="CALENDAR_EVENT_DESCRIPTION">
											<Anchors>
												<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="0" y="2"/>
											</Anchors>
										</FontString>
									</Layer>
								</Layers>
								<Scripts>
									<OnTextChanged method="UpdateFormStatus"/>
								</Scripts>
							</EditBox>
						</Frames>
					</Frame>
					<Button parentKey="CancelButton" inherits="UIPanelButtonTemplate" text="CANCEL" mixin="TaskManagerStepModalDialogMixin">
						<Size x="95" y="22"/>
						<Anchors>
							<Anchor point="BOTTOMRIGHT" x="-11" y="12"/>
						</Anchors>
						<Layers>
							<Layer level="BACKGROUND">
								<Texture name="$parent.Border" file="Interface\Buttons\UI-Button-Borders">
									<Size x="106" y="26"/>
									<Anchors>
										<Anchor point="TOPLEFT" x="-10" y="1"/>
										<Anchor point="BOTTOMRIGHT" x="1" y="-3"/>
									</Anchors>
									<TexCoords left="0.58203125" right="1.0" top="0.0" bottom="0.40625"/>
								</Texture>
							</Layer>
						</Layers>
						<Scripts>
							<OnClick method="Hide"/>
						</Scripts>
					</Button>
					<Button parentKey="AcceptButton" inherits="UIPanelButtonTemplate" text="ACCEPT" mixin="TaskManagerStepModalDialogMixin">
						<Size x="95" y="22"/>
						<Anchors>
							<Anchor point="RIGHT" relativeKey="$parent.CancelButton" relativePoint="LEFT" x="-3" y="0"/>
						</Anchors>
						<Layers>
							<Layer level="BACKGROUND">
								<Texture name="$parent.Border" file="Interface\Buttons\UI-Button-Borders">
									<Size x="106" y="26"/>
									<Anchors>
										<Anchor point="TOPLEFT" x="-10" y="1"/>
										<Anchor point="BOTTOMRIGHT" x="1" y="-3"/>
									</Anchors>
									<TexCoords left="0.58203125" right="1.0" top="0.0" bottom="0.40625"/>
								</Texture>
							</Layer>
						</Layers>
						<Scripts>
							<OnClick method="Accept"/>
						</Scripts>
					</Button>
				</Frames>
				<Scripts>
					<OnLoad method="OnLoad"/>
					<OnShow method="OnShow"/>
				</Scripts>
			</Frame>
			<Frame parentKey="Overlay" enableMouse="true" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset x="10" y="-10"/>
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset x="-10" y="10"/>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture setAllPoints="true">
							<Color r="0" g="0" b="0" a="0.5"/>
						</Texture>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						self:SetFrameLevel(self:GetParent():GetFrameLevel() + 5);
					</OnLoad>
				</Scripts>
			</Frame>
		</Frames>
		<Scripts>
			<OnShow method="OnShow"/>
			<OnHide method="OnHide"/>
			<OnLoad method="OnLoad"/>
			<OnEvent method="OnEvent"/>
		</Scripts>
	</Frame>
</Ui>
